var Ue=Object.defineProperty,Ge=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var ue=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D=(e,t)=>{for(var n in t||(t={}))He.call(t,n)&&ue(e,n,t[n]);if(be)for(var n of be(t))Ke.call(t,n)&&ue(e,n,t[n]);return e},Z=(e,t)=>Ge(e,We(t));var ee=(e,t,n)=>(ue(e,typeof t!="symbol"?t+"":t,n),n);import{c as Ye,s as Xe,p as qe,u as Je,t as ke,r as R,a as ye,b as h,w as G,d as de,e as T,f as s,o as u,g as _,h as a,n as S,i as x,j as I,F as z,k as B,l as te,m as Qe,C as Ze,q as et,v as tt,x as xe,y as C,z as W,A as H,B as K,D as nt,E as st,G as y,H as ot,I as lt,J as it,K as at,L as rt,M as ct,P as $e,N as Y,O as L,Q as F,S as ut,R as we,T as Ce,U as dt,V as pt,W as Me,X as Se,Y as ft,Z as vt,_ as Ie,$ as mt,a0 as ht,a1 as _t,a2 as gt,a3 as bt,a4 as kt,a5 as U,a6 as Te,a7 as yt,a8 as xt,a9 as $t,aa as wt,ab as Ct,ac as Fe}from"./vendor.0b5f20c3.js";const Mt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}};Mt();class St{constructor(){ee(this,"filesMap",new Map);ee(this,"idMap",new Map);ee(this,"taskFileMap",new WeakMap)}getFiles(t){return t?t.map(n=>this.filesMap.get(n)):Array.from(this.filesMap.values())}getFilepaths(){return Array.from(this.filesMap.keys())}getFailedFilepaths(){return this.getFiles().filter(t=>{var n;return((n=t.result)==null?void 0:n.state)==="fail"}).map(t=>t.filepath)}collectFiles(t=[]){t.forEach(n=>{this.filesMap.set(n.filepath,n),this.updateId(n)})}updateId(t){this.idMap.get(t.id)!==t&&(this.idMap.set(t.id,t),t.type==="suite"&&t.tasks.forEach(n=>{this.updateId(n)}))}updateTasks(t){for(const[n,o]of t)this.idMap.has(n)&&(this.idMap.get(n).result=o)}updateUserLog(t){const n=t.taskId&&this.idMap.get(t.taskId);n&&(n.logs||(n.logs=[]),n.logs.push(t))}}function ze(e){return e=e||[],Array.isArray(e)?e:[e]}function Ne(e){return ze(e).flatMap(t=>t.type==="test"?[t]:t.tasks.flatMap(n=>n.type==="test"?[n]:Ne(n)))}function pe(e=[]){return ze(e).flatMap(t=>t.type==="test"?[t]:[t,...pe(t.tasks)])}function ne(e){return Ne(e).some(t=>{var o,l;const n=(l=(o=t.result)==null?void 0:o.error)==null?void 0:l.message;return n==null?void 0:n.match(/Snapshot .* mismatched/)})}function It(e){const t=[e.name];let n=e;for(;(n==null?void 0:n.suite)||(n==null?void 0:n.file);)n=n.suite||n.file,(n==null?void 0:n.name)&&t.unshift(n.name);return t}function Tt(e,t={}){const{handlers:n={},autoReconnect:o=!0,reconnectInterval:l=2e3,reconnectTries:i=10,reactive:r=k=>k,WebSocketConstructor:p=globalThis.WebSocket}=t;let d=i;const c=r({ws:new p(e),state:new St,waitForConnection:w,reconnect:v});c.state.filesMap=r(c.state.filesMap),c.state.idMap=r(c.state.idMap);let b;c.rpc=Ye({onCollected(k){var g;c.state.collectFiles(k),(g=n.onCollected)==null||g.call(n,k)},onTaskUpdate(k){var g;c.state.updateTasks(k),(g=n.onTaskUpdate)==null||g.call(n,k)},onUserConsoleLog(k){c.state.updateUserLog(k)},onFinished(k){var g;(g=n.onFinished)==null||g.call(n,k)}},{post:k=>c.ws.send(k),on:k=>b=k,serialize:Xe,deserialize:qe});let f;function v(k=!1){k&&(d=i),c.ws=new WebSocket(e),m()}function m(){f=new Promise(k=>{c.ws.addEventListener("open",()=>{d=i,k()})}),c.ws.addEventListener("message",k=>{b(k.data)}),c.ws.addEventListener("close",()=>{d-=1,o&&d>0&&setTimeout(v,l)})}m();function w(){return f}return c}const Ve=Je("hash-params",{initialValue:{file:"",view:null}}),P=ke(Ve,"file"),j=ke(Ve,"view"),Ft=location.port,zt=[location.hostname,Ft].filter(Boolean).join(":"),Nt=`${location.protocol==="https:"?"wss:":"ws:"}//${zt}/__vitest_api__`,se=R("idle"),N=Tt(Nt,{reactive:de,handlers:{onTaskUpdate(){se.value="running"},onFinished(){se.value="idle"}}}),fe=ye({}),A=R("CONNECTING"),E=h(()=>N.state.getFiles()),M=h(()=>E.value.find(e=>e.id===P.value)),oe=h(()=>pe(M.value).map(e=>(e==null?void 0:e.logs)||[]).flat()||[]),le=e=>E.value.find(t=>t.id===e),Vt=h(()=>A.value==="OPEN"),ve=h(()=>A.value==="CONNECTING");h(()=>A.value==="CLOSED");function Re(e=N.state.getFiles()){return Ee(e)}function Ee(e){return e.forEach(t=>{delete t.result,pe(t).forEach(n=>delete n.result)}),N.rpc.rerun(e.map(t=>t.filepath))}function Rt(){if(M.value)return Ee([M.value])}G(()=>N.ws,e=>{A.value="CONNECTING",e.addEventListener("open",()=>{A.value="OPEN",N.state.filesMap.clear(),N.rpc.getFiles().then(t=>N.state.collectFiles(t)),N.rpc.getConfig().then(t=>fe.value=t)}),e.addEventListener("close",()=>{setTimeout(()=>{A.value==="CONNECTING"&&(A.value="CLOSED")},1e3)})},{immediate:!0});const Et={"text-2xl":""},Lt=a("div",{"text-lg":"",op50:""}," Check your terminal or start a new server with `vitest --ui` ",-1),Bt=T({setup(e){return(t,n)=>s(Vt)?I("",!0):(u(),_("div",{key:0,fixed:"","inset-0":"",p2:"","z-10":"","select-none":"",text:"center sm",bg:"overlay","backdrop-blur-sm":"","backdrop-saturate-0":"",onClick:n[0]||(n[0]=(...o)=>s(N).reconnect&&s(N).reconnect(...o))},[a("div",{"h-full":"",flex:"~ col gap-2","items-center":"","justify-center":"",class:S(s(ve)?"animate-pulse":"")},[a("div",{text:"5xl",class:S(s(ve)?"i-carbon:renew animate-spin animate-reverse":"i-carbon-wifi-off")},null,2),a("div",Et,x(s(ve)?"Connecting...":"Disconnected"),1),Lt],2)]))}}),jt={"h-full":"",class:"scrolls"},Ot={bg:"red-500/10",text:"red-500 sm",p:"x3 y2","m-2":"",rounded:""},Pt={key:0},At={key:1,bg:"green-500/10",text:"green-500 sm",p:"x4 y2","m-2":"",rounded:""},Dt=T({props:{file:null},setup(e){const t=e,n=h(()=>{var l;return((l=t.file)==null?void 0:l.tasks.filter(i=>{var r;return((r=i.result)==null?void 0:r.state)==="fail"}))||[]});function o(l){return l.startsWith(fe.value.root)?l.slice(fe.value.root.length):l}return(l,i)=>(u(),_("div",jt,[s(n).length?(u(!0),_(z,{key:0},B(s(n),r=>{var p;return u(),_("div",{key:r.id},[a("div",Ot,[te(x(r.name)+" ",1),((p=r.result)==null?void 0:p.error)?(u(),_("div",Pt,[a("pre",null,[a("b",null,x(r.result.error.name||r.result.error.nameStr),1),te(": "+x(r.result.error.message),1)]),(u(!0),_(z,null,B(r.result.error.stacks||[],(d,c)=>(u(),_("pre",{key:c,op80:""}," - "+x(o(d.file))+":"+x(d.line)+":"+x(d.column),1))),128))])):I("",!0)])])}),128)):(u(),_("div",At," All tests passed in this file "))]))}}),Ut={key:0,"h-full":"",class:"scrolls",flex:"","flex-col":""},Gt={border:"b base","p-4":""},Wt=["textContent"],Ht={key:1,p6:""},Kt=te(" Log something in your test and it would print here. (e.g. "),Yt=a("pre",{inline:""},"console.log(foo)",-1),Xt=te(") "),qt=[Kt,Yt,Xt],Jt=T({setup(e){function t(l){return new Date(l).toLocaleTimeString()}function n(l){return l.trim()}function o(l){const i=l&&N.state.idMap.get(l);return i?It(i).slice(1).join(" > "):"-"}return(l,i)=>{var r;return((r=s(oe))==null?void 0:r.length)?(u(),_("div",Ut,[(u(!0),_(z,null,B(s(oe),p=>(u(),_("div",{key:p.taskId,"font-mono":""},[a("div",Gt,[a("div",{"text-xs":"","mb-1":"",class:S(p.type==="stderr"?"text-red-600 dark:text-red-300":"op30")},x(t(p.time))+" | "+x(o(p.taskId))+" | "+x(p.type),3),a("pre",{textContent:x(n(p.content))},null,8,Wt)])]))),128))])):(u(),_("p",Ht,qt))}}});function Qt(e,t,n={}){const o=Ze.fromTextArea(e.value,D({theme:"vars"},n));let l=!1;return o.on("change",()=>{if(l){l=!1;return}t.value=o.getValue()}),G(t,i=>{if(i!==o.getValue()){l=!0;const r=o.listSelections();o.replaceRange(i,o.posFromIndex(0),o.posFromIndex(1/0)),o.setSelections(r)}},{immediate:!0}),Qe(o)}const Zt={relative:"","font-mono":"","text-sm":"",class:"scrolls"},Le=T({props:{modelValue:null,mode:null,readOnly:{type:Boolean}},emits:["update:modelValue","save"],setup(e,{expose:t,emit:n}){const o=e,l=et(),i={js:"javascript",mjs:"javascript",cjs:"javascript",ts:{name:"javascript",typescript:!0},mts:{name:"javascript",typescript:!0},cts:{name:"javascript",typescript:!0},jsx:{name:"javascript",jsx:!0},tsx:{name:"javascript",typescript:!0,jsx:!0}},r=R(),p=tt(o,"modelValue",n,{passive:!0}),d=ye();return t({cm:d}),xe(async()=>{d.value=Qt(r,p,Z(D(D({},o),l),{mode:i[o.mode||""]||o.mode,readOnly:o.readOnly?"nocursor":void 0,extraKeys:{"Cmd-S":function(c){n("save",c.getValue())},"Ctrl-S":function(c){n("save",c.getValue())}}})),d.value.setSize("100%","100%"),d.value.clearHistory(),setTimeout(()=>d.value.refresh(),100)}),(c,b)=>(u(),_("div",Zt,[a("textarea",{ref_key:"el",ref:r},null,512)]))}}),en=T({props:{file:null},setup(e){const t=e,n=R("");G(()=>t.file,async()=>{var f;if(!t.file||!((f=t.file)==null?void 0:f.filepath)){n.value="";return}n.value=await N.rpc.readFile(t.file.filepath)},{immediate:!0});const o=h(()=>{var f,v;return((v=(f=t.file)==null?void 0:f.filepath)==null?void 0:v.split(/\./g).pop())||"js"}),l=R(),i=h(()=>{var f;return(f=l.value)==null?void 0:f.cm}),r=h(()=>{var f;return((f=t.file)==null?void 0:f.tasks.filter(v=>{var m;return((m=v.result)==null?void 0:m.state)==="fail"}))||[]}),p=R(!1),d=[],c=[];async function b(f){p.value=!0,await N.rpc.writeFile(t.file.filepath,f)}return G([i,r],()=>{!i.value||setTimeout(()=>{var f;d.forEach(v=>v.clear()),c.forEach(v=>{var m;return(m=i.value)==null?void 0:m.removeLineClass(v,"wrap")}),d.length=0,c.length=0,r.value.forEach(v=>{var k;const m=(k=v.result)==null?void 0:k.error,w=((m==null?void 0:m.stacks)||[]).filter(g=>{var $;return g.file&&g.file===(($=t.file)==null?void 0:$.filepath)});if(w.length){const g=w[0].sourcePos||w[0],$=document.createElement("pre");$.className="c-red-600 dark:c-red-400",$.textContent=`${" ".repeat(g.column)}^ ${m==null?void 0:m.nameStr}: ${m==null?void 0:m.message}`,c.push(i.value.addLineClass(g.line-1,"wrap","bg-red-500/10")),d.push(i.value.addLineWidget(g.line-1,$))}}),p.value||(f=i.value)==null||f.clearHistory()},100)},{flush:"post"}),(f,v)=>{const m=Le;return u(),C(m,W({ref_key:"editor",ref:l,modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=w=>n.value=w),"h-full":""},{lineNumbers:!0},{mode:s(o),onSave:b}),null,16,["modelValue","mode"])}}}),tn=T({props:{modelValue:{type:Boolean,default:!1},direction:{default:"bottom"}},emits:["update:modelValue"],setup(e){const t=e,n=h(()=>{switch(t.direction){case"bottom":return"bottom-0 left-0 right-0 border-t";case"top":return"top-0 left-0 right-0 border-b";case"left":return"bottom-0 left-0 top-0 border-r";case"right":return"bottom-0 top-0 right-0 border-l";default:return""}}),o=h(()=>{switch(t.direction){case"bottom":return"translateY(100%)";case"top":return"translateY(-100%)";case"left":return"translateX(-100%)";case"right":return"translateX(100%)";default:return""}});return(l,i)=>(u(),_("div",{class:S(["fixed inset-0 z-40",e.modelValue?"":"pointer-events-none"])},[a("div",{class:S(["bg-base inset-0 absolute transition-opacity duration-500 ease-out",e.modelValue?"opacity-50":"opacity-0"]),onClick:i[0]||(i[0]=r=>l.$emit("update:modelValue",!1))},null,2),a("div",{class:S(["bg-base border-base absolute transition-all duration-200 ease-out",[s(n),"scrolls"]]),style:K(e.modelValue?{}:{transform:s(o)})},[H(l.$slots,"default")],6)],2))}}),nn=["aria-label","opacity","hover"],X=T({props:{icon:null,title:null,disabled:{type:Boolean}},setup(e){return(t,n)=>(u(),_("button",{"aria-label":e.title,role:"button",opacity:e.disabled?10:70,rounded:"",hover:e.disabled?"":"bg-active op100",class:"w-1.4em h-1.4em flex"},[H(t.$slots,"default",{},()=>[a("div",{class:S(e.icon),ma:""},null,2)])],8,nn))}}),sn={"w-350":"","max-w-screen":""},on={"p-4":"",relative:""},ln=a("p",null,"Module Info",-1),an={op50:"","font-mono":"","text-sm":""},rn={key:0,"p-5":""},cn={grid:"~ cols-2","overflow-hidden":""},un=a("div",{p:"x3 y-1","bg-overlay":"",border:"base b t r"}," Source ",-1),dn=a("div",{p:"x3 y-1","bg-overlay":"",border:"base b t"}," Transformed ",-1),pn={p:"x3 y-1","bg-overlay":"",border:"base b t"},fn=T({props:{id:null},emits:["close"],setup(e,{emit:t}){const n=e,o=nt(()=>N.rpc.getTransformResult(n.id)),l=h(()=>{var d;return((d=n.id)==null?void 0:d.split(/\./g).pop())||"js"}),i=h(()=>{var d,c;return((c=(d=o.value)==null?void 0:d.source)==null?void 0:c.trim())||""}),r=h(()=>{var d,c;return((c=(d=o.value)==null?void 0:d.code)==null?void 0:c.replace(/\/\/# sourceMappingURL=.*\n/,"").trim())||""}),p=h(()=>{var d,c,b,f,v;return{mappings:(b=(c=(d=o.value)==null?void 0:d.map)==null?void 0:c.mappings)!=null?b:"",version:(v=(f=o.value)==null?void 0:f.map)==null?void 0:v.version}});return st("Escape",()=>{t("close")}),(d,c)=>{const b=X,f=Le;return u(),_("div",sn,[a("div",on,[ln,a("p",an,x(e.id),1),y(b,{icon:"i-carbon-close",absolute:"","top-5px":"","right-5px":"","text-2xl":"",onClick:c[0]||(c[0]=v=>t("close"))})]),s(o)?(u(),_(z,{key:1},[a("div",cn,[un,dn,a("div",null,[y(f,W({"model-value":s(i),"read-only":""},{lineNumbers:!0},{mode:s(l)}),null,16,["model-value","mode"])]),a("div",null,[y(f,W({"model-value":s(r),"read-only":""},{lineNumbers:!0},{mode:s(l)}),null,16,["model-value","mode"])])]),s(p).mappings!==""?(u(),_(z,{key:0},[a("div",pn," Source map (v"+x(s(p).version)+") ",1),y(f,W({"model-value":s(p).mappings,"read-only":""},{lineNumbers:!0},{mode:s(l)}),null,16,["model-value","mode"])],64)):I("",!0)],64)):(u(),_("div",rn," No transform result found for this module. "))])}}});const vn={"h-full":"","min-h-75":"","flex-1":"",overflow:"hidden"},mn={flex:"","items-center":"","gap-4":"","px-3":"","py-2":""},hn=["id","checked","onChange"],_n=["for"],gn=a("div",{"flex-auto":""},null,-1),bn=T({props:{graph:null},setup(e){const t=e,{graph:n}=ot(t),o=R(),l=R(!1),i=R(),r=R();lt(()=>{l.value===!1&&setTimeout(()=>i.value=void 0,300)},{flush:"post"}),xe(()=>{c()}),it(()=>{var f;(f=r.value)==null||f.shutdown()}),G(n,c);function p(f,v){var m;(m=r.value)==null||m.filterNodesByType(v,f)}function d(f){i.value=f,l.value=!0}function c(){var f;(f=r.value)==null||f.shutdown(),!(!n.value||!o.value)&&(r.value=new at(o.value,n.value,rt({nodeRadius:10,autoResize:!0,simulation:{alphas:{initialize:1,resize:({newHeight:v,newWidth:m})=>v===0&&m===0?0:.25},forces:{collision:{radiusMultiplier:10},link:{length:240}}},marker:ct.Arrow(2),modifiers:{node:b},positionInitializer:n.value.nodes.length>1?$e.Randomized:$e.Centered,zoom:{min:.5,max:2}})))}function b(f){const v=g=>g.button===0;let m=0,w=0,k=0;f.on("pointerdown",(g,$)=>{$.type!=="external"&&(!$.x||!$.y||!v(g)||(m=$.x,w=$.y,k=Date.now()))}).on("pointerup",(g,$)=>{if($.type==="external"||!$.x||!$.y||!v(g)||Date.now()-k>500)return;const V=$.x-m,Q=$.y-w;V**2+Q**2<100&&d($.id)})}return(f,v)=>{var $;const m=X,w=fn,k=tn,g=Y("tooltip");return u(),_("div",vn,[a("div",null,[a("div",mn,[(u(!0),_(z,null,B(($=r.value)==null?void 0:$.nodeTypes.sort(),V=>{var Q;return u(),_("div",{key:V,flex:"~ gap-1","items-center":"","select-none":""},[a("input",{id:`type-${V}`,type:"checkbox",checked:(Q=r.value)==null?void 0:Q.nodeTypeFilter.includes(V),onChange:De=>p(V,De.target.checked)},null,40,hn),a("label",{"font-light":"","text-sm":"","ws-nowrap":"","overflow-hidden":"",capitalize:"",truncate:"",for:`type-${V}`,"border-b-2":"",style:K({"border-color":`var(--color-node-${V})`})},x(V)+" Modules",13,_n)])}),128)),gn,a("div",null,[L(y(m,{icon:"i-carbon-reset",onClick:c},null,512),[[g,"Reset",void 0,{bottom:!0}]])])])]),a("div",{ref_key:"el",ref:o},null,512),y(k,{modelValue:l.value,"onUpdate:modelValue":v[1]||(v[1]=V=>l.value=V),direction:"right"},{default:F(()=>[i.value?(u(),C(ut,{key:0},{default:F(()=>[y(w,{id:i.value,onClose:v[0]||(v[0]=V=>l.value=!1)},null,8,["id"])]),_:1})):I("",!0)]),_:1},8,["modelValue"])])}}}),kn={key:0,"text-green-500":"","flex-shrink-0":"","i-carbon:checkmark":""},yn={key:1,"text-red-500":"","flex-shrink-0":"","i-carbon:compare":""},xn={key:2,"text-red-500":"","flex-shrink-0":"","i-carbon:close":""},$n={key:3,"text-gray-500":"","flex-shrink-0":"","i-carbon:document-blank":""},wn={key:4,"text-gray-500":"","flex-shrink-0":"","i-carbon:redo":"","rotate-90":""},Cn={key:5,"text-yellow-500":"","flex-shrink-0":"","i-carbon:circle-dash":"","animate-spin":""},me=T({props:{task:null},setup(e){return(t,n)=>{var l,i;const o=Y("tooltip");return((l=e.task.result)==null?void 0:l.state)==="pass"?(u(),_("div",kn)):s(ne)(e.task)?L((u(),_("div",yn,null,512)),[[o,"Contains failed snapshot",void 0,{right:!0}]]):((i=e.task.result)==null?void 0:i.state)==="fail"?(u(),_("div",xn)):e.task.mode==="todo"?L((u(),_("div",$n,null,512)),[[o,"Todo",void 0,{right:!0}]]):e.task.mode==="skip"?L((u(),_("div",wn,null,512)),[[o,"Skipped",void 0,{right:!0}]]):(u(),_("div",Cn))}}});function Mn(e){let t=e;return t.includes("/node_modules/")?t=t.split(/\/node_modules\//g).pop().split(/\//g).shift():t=t.split(/\//g).pop(),Ce({color:"var(--color-node-external)",label:{color:"var(--color-node-external)",fontSize:"0.875rem",text:t},isFocused:!1,id:e,type:"external"})}function Sn(e,t){return Ce({color:t?"var(--color-node-root)":"var(--color-node-inline)",label:{color:t?"var(--color-node-root)":"var(--color-node-inline)",fontSize:"0.875rem",text:e.split(/\//g).pop()},isFocused:!1,id:e,type:"inline"})}function In(e,t){var p,d;if(!e)return we({});const n=(p=e.externalized.map(c=>Mn(c)))!=null?p:[],o=(d=e.inlined.map(c=>Sn(c,c===t)))!=null?d:[],l=[...n,...o],i=Object.fromEntries(l.map(c=>[c.id,c])),r=Object.entries(e.graph).flatMap(([c,b])=>b.map(f=>{const v=i[c],m=i[f];if(!(v===void 0||m===void 0))return dt({source:v,target:m,color:"var(--color-link)",label:!1})}).filter(f=>f!==void 0));return we({nodes:l,links:r})}const Tn={key:0,flex:"","flex-col":"","h-full":"","max-h-full":"","overflow-hidden":""},Fn={p:"2","h-10":"",flex:"~ gap-2","items-center":"","bg-header":"",border:"b base"},zn={"flex-1":"","font-light":"","op-50":"","ws-nowrap":"",truncate:"","text-sm":""},Nn={class:"flex text-lg"},Vn={flex:"~","items-center":"","bg-header":"",border:"b-2 base","text-sm":"","h-38px":""},Rn={flex:"","flex-col":"","flex-1":"",overflow:"hidden"},En=T({setup(e){const t=R({externalized:[],graph:{},inlined:[]}),n=R({nodes:[],links:[]});pt(M,async(i,r)=>{i&&i.filepath!==(r==null?void 0:r.filepath)&&(t.value=await N.rpc.getModuleGraph(i.filepath),n.value=In(t.value,i.filepath))},{debounce:100,immediate:!0});const o=()=>{var r;const i=(r=M.value)==null?void 0:r.filepath;i&&fetch(`/__open-in-editor?file=${encodeURIComponent(i)}`)},l=i=>{j.value=i};return(i,r)=>{var w,k,g,$;const p=me,d=X,c=bn,b=en,f=Jt,v=Dt,m=Y("tooltip");return s(M)?(u(),_("div",Tn,[a("div",null,[a("div",Fn,[y(p,{task:s(M)},null,8,["task"]),a("div",zn,x((w=s(M))==null?void 0:w.filepath),1),a("div",Nn,[L(y(d,{icon:"i-carbon-launch",disabled:!((k=s(M))==null?void 0:k.filepath),onClick:o},null,8,["disabled"]),[[m,"Open in editor",void 0,{bottom:!0}]])])]),a("div",Vn,[a("button",{"tab-button":"",class:S({"tab-button-active":s(j)==null}),onClick:r[0]||(r[0]=V=>l(null))}," Report ",2),a("button",{"tab-button":"",class:S({"tab-button-active":s(j)==="graph"}),onClick:r[1]||(r[1]=V=>l("graph"))}," Module Graph ",2),a("button",{"tab-button":"",class:S({"tab-button-active":s(j)==="editor"}),onClick:r[2]||(r[2]=V=>l("editor"))}," Code ",2),a("button",{"tab-button":"",class:S({"tab-button-active":s(j)==="console",op20:s(j)!=="console"&&((g=s(oe))==null?void 0:g.length)===0}),onClick:r[3]||(r[3]=V=>l("console"))}," Console ("+x((($=s(oe))==null?void 0:$.length)||0)+") ",3)])]),a("div",Rn,[L(y(c,{graph:n.value},null,8,["graph"]),[[Me,s(j)==="graph"]]),s(j)==="editor"?(u(),C(b,{key:s(M).filepath,file:s(M)},null,8,["file"])):s(j)==="console"?(u(),C(f,{key:1,file:s(M)},null,8,["file"])):s(j)?I("",!0):(u(),C(v,{key:2,file:s(M)},null,8,["file"]))])])):I("",!0)}}});const Ln=["open"],Bn=a("div",{"flex-1":"","h-1px":"",border:"base b",op80:""},null,-1),jn=a("div",{"flex-1":"","h-1px":"",border:"base b",op80:""},null,-1),On=T({props:{color:null},setup(e){const t=R(!0);return(n,o)=>(u(),_("div",{open:t.value,class:"details-panel",onToggle:o[0]||(o[0]=l=>t.value=l.target.open)},[a("div",{p:"y1","text-sm":"","bg-base":"","items-center":"","z-5":"","gap-2":"",class:S(e.color),"w-full":"",flex:"","select-none":"",sticky:"",top:"-1"},[Bn,H(n.$slots,"summary",{open:t.value}),jn],2),H(n.$slots,"default")],40,Ln))}}),Pn={key:0,flex:"~ row","items-center":"",p:"x-2 y-1","border-rounded":"","cursor-pointer":"",hover:"bg-active"},An=["text"],Dn={"text-sm":"",truncate:"","font-light":""},Un={key:0,text:"xs",op20:"",style:{"white-space":"nowrap"}},Gn=T({props:{task:null},setup(e){const t=e,n=h(()=>{const{result:o}=t.task;return o&&Math.round(o.duration||0)});return(o,l)=>{var r,p;const i=me;return e.task?(u(),_("div",Pn,[y(i,{task:e.task,"mr-2":""},null,8,["task"]),a("div",{flex:"","items-end":"","gap-2":"",text:((p=(r=e.task)==null?void 0:r.result)==null?void 0:p.state)==="fail"?"red-500":""},[a("span",Dn,x(e.task.name),1),typeof s(n)=="number"?(u(),_("span",Un,x(s(n)>0?s(n):"< 1")+"ms ",1)):I("",!0)],8,An)])):I("",!0)}}}),Wn={key:1},Hn={inheritAttrs:!1},Kn=T(Z(D({},Hn),{props:{task:null,indent:{default:0},nested:{type:Boolean,default:!1},search:null,onItemClick:null},setup(e){return(t,n)=>{const o=Gn,l=Se("TaskTree",!0);return u(),_(z,null,[!e.search||e.task.name.match(e.search)?(u(),C(o,W({key:0},t.$attrs,{task:e.task,style:{paddingLeft:`${e.indent*.75+1}rem`},onClick:n[0]||(n[0]=i=>e.onItemClick&&e.onItemClick(e.task))}),null,16,["task","style"])):I("",!0),e.nested&&e.task.type==="suite"&&e.task.tasks.length?(u(),_("div",Wn,[(u(!0),_(z,null,B(e.task.tasks,i=>(u(),C(l,{key:i.id,task:i,nested:e.nested,indent:e.indent+1,search:e.search,"on-item-click":e.onItemClick},null,8,["task","nested","indent","search","on-item-click"]))),128))])):I("",!0)],64)}}})),Yn={h:"full",flex:"~ col"},Xn={p:"2","h-10":"",flex:"~ gap-2","items-center":"","bg-header":"",border:"b base"},qn={p:"x3 y2",flex:"~ gap-2","items-center":"","bg-header":"",border:"b-2 base"},Jn=a("div",{"i-carbon:search":"","flex-shrink-0":""},null,-1),Qn=["op"],Zn={class:"scrolls","flex-auto":"","py-1":""},es={"text-red5":""},ts={"text-yellow5":""},ns={"text-green5":""},ss={"text-purple5:50":""},os={key:2,flex:"~ col","items-center":"",p:"x4 y4","font-light":""},ls=a("div",{op30:""}," No matched test ",-1),is={inheritAttrs:!1},Be=T(Z(D({},is),{props:{tasks:null,indent:{default:0},nested:{type:Boolean,default:!1},groupByType:{type:Boolean,default:!1},onItemClick:null},emits:["run"],setup(e,{emit:t}){const n=e,o=R(""),l=h(()=>o.value.trim()!==""),i=h(()=>o.value.trim()?n.tasks.filter(v=>v.name.match(o.value)):n.tasks),r=h(()=>l.value?i.value.map(v=>le(v.id)).filter(Boolean):[]),p=h(()=>i.value.filter(v=>{var m;return((m=v.result)==null?void 0:m.state)==="fail"})),d=h(()=>i.value.filter(v=>{var m;return((m=v.result)==null?void 0:m.state)==="pass"})),c=h(()=>i.value.filter(v=>v.mode==="skip"||v.mode==="todo")),b=h(()=>i.value.filter(v=>!p.value.includes(v)&&!d.value.includes(v)&&!c.value.includes(v))),f=ft(b,250);return(v,m)=>{const w=Kn,k=On;return u(),_("div",Yn,[a("div",null,[a("div",Xn,[H(v.$slots,"header",{filteredTests:s(l)?s(r):void 0})]),a("div",qn,[Jn,L(a("input",{"onUpdate:modelValue":m[0]||(m[0]=g=>o.value=g),placeholder:"Search...",outline:"none",bg:"transparent",font:"light",text:"sm","flex-1":"","pl-1":"",op:o.value.length?"100":"50",onKeydown:[m[1]||(m[1]=Ie(g=>o.value="",["esc"])),m[2]||(m[2]=Ie(g=>t("run",s(l)?s(r):void 0),["enter"]))]},null,40,Qn),[[vt,o.value]])])]),a("div",Zn,[e.groupByType?(u(),_(z,{key:0},[s(p).length?(u(),C(k,{key:0},{summary:F(()=>[a("div",es," FAIL ("+x(s(p).length)+") ",1)]),default:F(()=>[(u(!0),_(z,null,B(s(p),g=>(u(),C(w,{key:g.id,task:g,nested:e.nested,search:o.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128))]),_:1})):I("",!0),s(b).length||s(se)==="running"?(u(),C(k,{key:1},{summary:F(()=>[a("div",ts," RUNNING ("+x(s(f).length)+") ",1)]),default:F(()=>[(u(!0),_(z,null,B(s(f),g=>(u(),C(w,{key:g.id,task:g,nested:e.nested,search:o.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128))]),_:1})):I("",!0),s(d).length?(u(),C(k,{key:2},{summary:F(()=>[a("div",ns," PASS ("+x(s(d).length)+") ",1)]),default:F(()=>[(u(!0),_(z,null,B(s(d),g=>(u(),C(w,{key:g.id,task:g,nested:e.nested,search:o.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128))]),_:1})):I("",!0),s(c).length?(u(),C(k,{key:3},{summary:F(()=>[a("div",ss," SKIP ("+x(s(c).length)+") ",1)]),default:F(()=>[(u(!0),_(z,null,B(s(c),g=>(u(),C(w,{key:g.id,task:g,nested:e.nested,search:o.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128))]),_:1})):I("",!0)],64)):(u(!0),_(z,{key:1},B(s(i),g=>(u(),C(w,{key:g.id,task:g,nested:e.nested,search:o.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128)),s(l)&&s(i).length===0?(u(),_("div",os,[ls,a("button",{"font-light":"",op:"50 hover:100","text-sm":"",border:"~ gray-400/50 rounded",p:"x2 y0.5",m:"t2",onClick:m[3]||(m[3]=g=>o.value="")}," Clear ")])):I("",!0)])])}}})),as={key:0,"h-full":""},rs={"font-bold":"","text-sm":"","flex-auto":"","ws-nowrap":"","overflow-hidden":"",truncate:""},cs={class:"flex text-lg"},us=T({setup(e){const t=h(()=>{var l;return(l=M.value)==null?void 0:l.name.split(/\//g).pop()}),n=h(()=>{var l,i;return((l=M.value)==null?void 0:l.tasks)&&ne((i=M.value)==null?void 0:i.tasks)}),o=()=>M.value&&N.rpc.updateSnapshot(M.value);return(l,i)=>{const r=me,p=X,d=Be,c=Y("tooltip");return s(M)?(u(),_("div",as,[y(d,{tasks:s(M).tasks,nested:!0},{header:F(()=>[y(r,{"mx-1":"",task:s(M)},null,8,["task"]),a("span",rs,x(s(t)),1),a("div",cs,[s(n)?L((u(),C(p,{key:0,icon:"i-carbon-result-old",onClick:i[0]||(i[0]=b=>o())},null,512)),[[c,`Update failed snapshot(s) of ${s(M).name}`,void 0,{bottom:!0}]]):I("",!0),L(y(p,{icon:"i-carbon-play",onClick:i[1]||(i[1]=b=>s(Rt)())},null,512),[[c,"Rerun file",void 0,{bottom:!0}]])])]),_:1},8,["tasks"])])):I("",!0)}}}),ie=h(()=>E.value.filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="fail"})),ae=h(()=>E.value.filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="pass"})),he=h(()=>E.value.filter(e=>e.mode==="skip"||e.mode==="todo"));h(()=>E.value.filter(e=>!ie.value.includes(e)&&!ae.value.includes(e)&&!he.value.includes(e)));h(()=>he.value.filter(e=>e.mode==="skip"));const je=h(()=>E.value.filter(ne));h(()=>he.value.filter(e=>e.mode==="todo"));const ds=h(()=>se.value==="idle"),re=h(()=>_e(E.value)),ps=h(()=>re.value.filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="fail"})),fs=h(()=>re.value.filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="pass"})),Oe=h(()=>re.value.filter(e=>e.mode==="skip"||e.mode==="todo"));h(()=>Oe.value.filter(e=>e.mode==="skip"));h(()=>Oe.value.filter(e=>e.mode==="todo"));h(()=>ps.value.length+fs.value.length);const vs=h(()=>{const e=_e(re.value).reduce((t,n)=>{var o;return((o=n.result)==null?void 0:o.duration)&&(t+=n.result.duration),t},0);return e>1e3?`${(e/1e3).toFixed(2)}s`:`${Math.round(e)}ms`});function ms(e){return e=e||[],Array.isArray(e)?e:[e]}function _e(e){return ms(e).flatMap(t=>t.type==="test"?[t]:t.tasks.flatMap(n=>n.type==="test"?[n]:_e(n)))}var q=(e,t)=>{const n=e.__vccOpts||e;for(const[o,l]of t)n[o]=l;return n};const O=e=>(mt("data-v-09144456"),e=e(),ht(),e),hs={grid:"~ cols-[min-content_1fr_min-content]","items-center":"",gap:"x-2 y-3",p:"x4",relative:"","font-light":"","w-80":"",op80:""},_s=O(()=>a("div",{"i-carbon-document":""},null,-1)),gs=O(()=>a("div",null,"Files",-1)),bs={class:"number"},ks=O(()=>a("div",{"i-carbon-checkmark":""},null,-1)),ys=O(()=>a("div",null,"Pass",-1)),xs={class:"number"},$s=O(()=>a("div",{"i-carbon-close":""},null,-1)),ws=O(()=>a("div",null," Fail ",-1)),Cs={class:"number","text-red5":""},Ms=O(()=>a("div",{"i-carbon-compare":""},null,-1)),Ss=O(()=>a("div",null," Snapshot Fail ",-1)),Is={class:"number","text-red5":""},Ts=O(()=>a("div",{"i-carbon-timer":""},null,-1)),Fs=O(()=>a("div",null,"Time",-1)),zs={class:"number"},Ns=T({setup(e){return(t,n)=>(u(),_("div",hs,[_s,gs,a("div",bs,x(s(E).length),1),s(ae).length?(u(),_(z,{key:0},[ks,ys,a("div",xs,x(s(ae).length),1)],64)):I("",!0),s(ie).length?(u(),_(z,{key:1},[$s,ws,a("div",Cs,x(s(ie).length),1)],64)):I("",!0),s(je).length?(u(),_(z,{key:2},[Ms,Ss,a("div",Is,x(s(je).length),1)],64)):I("",!0),Ts,Fs,a("div",zs,x(s(vs)),1)]))}});var Vs=q(Ns,[["__scopeId","data-v-09144456"]]);const Rs={},Es={"gap-0":"",flex:"~ col gap-4","h-full":"","justify-center":"","items-center":""},Ls={"bg-header":"","rounded-lg":"",p:"y4 x2"};function Bs(e,t){const n=Vs;return u(),_("div",Es,[a("div",Ls,[y(n)])])}var js=q(Rs,[["render",Bs]]);const Os={},Ps={h:"full",flex:"~ col"},As=a("div",{p:"3","h-10":"",flex:"~ gap-2","items-center":"","bg-header":"",border:"b base"},[a("div",{class:"i-carbon-dashboard"}),a("span",{"pl-1":"","font-bold":"","text-sm":"","flex-auto":"","ws-nowrap":"","overflow-hidden":"",truncate:""},"Dashboard")],-1),Ds={class:"scrolls","flex-auto":"","py-1":""};function Us(e,t){const n=js;return u(),_("div",Ps,[As,a("div",Ds,[y(n)])])}var Gs=q(Os,[["render",Us]]),Ws="/__vitest__/favicon.svg";const ce=R(void 0),J=R(!0);function Hs(){const e=P.value;if(e&&e.length>0){const t=le(e);t?(ce.value=t,J.value=!1):_t(()=>N.state.getFiles(),()=>{ce.value=le(e),J.value=!1})}return J}function Pe(e){J.value=e,e&&(ce.value=void 0,P.value="")}const Ae=gt(),Ks=bt(Ae),Ys=a("img",{"w-6":"","h-6":"",src:Ws},null,-1),Xs=a("span",{"font-light":"","text-sm":"","flex-1":""},"Vitest",-1),qs={class:"flex text-lg"},Js=T({setup(e){const t=h(()=>E.value&&ne(E.value)),n=()=>N.rpc.updateSnapshot();function o(i){P.value=i.id,ce.value=le(i.id),Pe(!1)}const l=h(()=>Ae.value?"light":"dark");return(i,r)=>{const p=X,d=Be,c=Y("tooltip");return u(),C(d,{border:"r base",tasks:s(E),"on-item-click":o,"group-by-type":!0,onRun:s(Re)},{header:F(({filteredTests:b})=>[Ys,Xs,a("div",qs,[L(y(p,{title:"Show dashboard",class:"!animate-100ms","animate-count-1":"",icon:"i-carbon-dashboard",onClick:r[0]||(r[0]=f=>s(Pe)(!0))},null,512),[[Me,!s(J)],[c,"Dashboard",void 0,{bottom:!0}]]),s(t)?L((u(),C(p,{key:0,icon:"i-carbon-result-old",onClick:r[1]||(r[1]=f=>n())},null,512)),[[c,"Update all failed snapshot(s)",void 0,{bottom:!0}]]):I("",!0),L(y(p,{disabled:(b==null?void 0:b.length)===0,icon:"i-carbon-play",onClick:f=>s(Re)(b)},null,8,["disabled","onClick"]),[[c,b?b.length===0?"No test to run (clear filter)":"Rerun filtered":"Rerun all",void 0,{bottom:!0}]]),L(y(p,{icon:"dark:i-carbon-moon i-carbon-sun",onClick:r[2]||(r[2]=f=>s(Ks)())},null,512),[[c,`Toggle to ${s(l)} mode`,void 0,{bottom:!0}]])])]),_:1},8,["tasks","onRun"])}}});const Qs={"h-3px":"",relative:"","overflow-hidden":"",class:"px-0","w-screen":""},Zs=T({setup(e){const{width:t}=kt(),n=h(()=>E.value.length===0?"!bg-gray-4 !dark:bg-gray-7 in-progress":ds.value?null:"in-progress"),o=h(()=>E.value.length),l=h(()=>ae.value.length),i=h(()=>ie.value.length),r=h(()=>{const b=s(o);return b>0?t.value*l.value/b:0}),p=h(()=>{const b=s(o);return b>0?t.value*i.value/b:0}),d=h(()=>s(o)-i.value-l.value),c=h(()=>{const b=s(o);return b>0?t.value*d.value/b:0});return(b,f)=>(u(),_("div",{absolute:"","t-0":"","l-0":"","r-0":"","z-index-1031":"","pointer-events-none":"","p-0":"","h-3px":"",grid:"~ auto-cols-max","justify-items-center":"","w-screen":"",class:S(s(n))},[a("div",Qs,[a("div",{absolute:"","l-0":"","t-0":"","bg-red5":"","h-3px":"",class:S(s(n)),style:K(`width: ${s(p)}px;`)}," \xA0 ",6),a("div",{absolute:"","l-0":"","t-0":"","bg-green5":"","h-3px":"",class:S(s(n)),style:K(`left: ${s(p)}px; width: ${s(r)}px;`)}," \xA0 ",6),a("div",{absolute:"","l-0":"","t-0":"","bg-yellow5":"","h-3px":"",class:S(s(n)),style:K(`left: ${s(r)+s(p)}px; width: ${s(c)}px;`)}," \xA0 ",6)])],2))}});var eo=q(Zs,[["__scopeId","data-v-513f7dd8"]]);const to={"h-screen":"","w-screen":"",overflow:"hidden"},no=T({setup(e){const t=Hs(),n=de([33,67]),o=de([33,67]),l=Te(p=>{p.forEach((d,c)=>{n[c]=d.size})},0),i=Te(p=>{p.forEach((d,c)=>{o[c]=d.size})},0),r=()=>{const p=window.innerWidth,d=Math.min(p/3,300);n[0]=100*d/p,n[1]=100-n[0],o[0]=100*d/(p-d),o[1]=100-o[0]};return(p,d)=>{const c=eo,b=Js,f=Gs,v=us,m=En,w=Bt;return u(),_(z,null,[y(c),a("div",to,[y(s(U.exports.Splitpanes),{class:"pt-4px",onResized:s(l),onReady:r},{default:F(()=>[y(s(U.exports.Pane),{size:s(n)[0]},{default:F(()=>[y(b)]),_:1},8,["size"]),y(s(U.exports.Pane),{size:s(n)[1]},{default:F(()=>[y(yt,null,{default:F(()=>[s(t)?(u(),C(f,{key:"summary"})):(u(),C(s(U.exports.Splitpanes),{key:"detail",onResized:s(i)},{default:F(()=>[y(s(U.exports.Pane),{size:s(o)[0]},{default:F(()=>[y(v)]),_:1},8,["size"]),y(s(U.exports.Pane),{size:s(o)[1]},{default:F(()=>[y(m)]),_:1},8,["size"])]),_:1},8,["onResized"]))]),_:1})]),_:1},8,["size"])]),_:1},8,["onResized"])]),y(w)],64)}}}),so=[{name:"index",path:"/",component:no,props:!0}],oo={};function lo(e,t){const n=Se("RouterView");return u(),C(n)}var io=q(oo,[["render",lo]]);const ge=xt(io),ao=$t({history:wt("/__vitest__/"),routes:so});ge.use(ao);ge.directive("tooltip",Ct);Fe.options.instantMove=!0;Fe.options.distance=10;ge.mount("#app");
